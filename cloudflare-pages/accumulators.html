<!DOCTYPE html>
<html lang="en" data-theme="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Smart Accumulators | FootyPredict Pro</title>
    
    <meta name="theme-color" content="#6366f1">
    <link rel="manifest" href="/static/manifest.json">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --bg-primary: #050510;
            --bg-secondary: #0d0d1a;
            --bg-tertiary: #14142a;
            --accent: #6366f1;
            --accent-glow: rgba(99, 102, 241, 0.4);
            --gold: #fbbf24;
            --emerald: #10b981;
            --rose: #f43f5e;
            --text: #ffffff;
            --text-muted: rgba(255, 255, 255, 0.5);
        }
        
        [data-theme="light"] {
            --bg-primary: #f8fafc;
            --bg-secondary: #ffffff;
            --bg-tertiary: #f1f5f9;
            --text: #0f172a;
            --text-muted: #64748b;
        }
        
        * { box-sizing: border-box; margin: 0; padding: 0; }
        
        body {
            font-family: 'Inter', sans-serif;
            background: var(--bg-primary);
            background-image: radial-gradient(ellipse at top, rgba(99, 102, 241, 0.15) 0%, transparent 50%);
            color: var(--text);
            min-height: 100vh;
        }
        
        .app { max-width: 1400px; margin: 0 auto; padding: 20px; }
        
        /* Header */
        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px 30px;
            background: rgba(13, 13, 26, 0.8);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.06);
            border-radius: 20px;
            margin-bottom: 30px;
        }
        
        [data-theme="light"] .header {
            background: rgba(255, 255, 255, 0.9);
            border-color: rgba(0, 0, 0, 0.08);
        }
        
        .logo { display: flex; align-items: center; gap: 12px; }
        
        .logo-icon {
            width: 48px; height: 48px;
            background: linear-gradient(135deg, #10b981, #059669);
            border-radius: 14px;
            display: flex; align-items: center; justify-content: center;
            font-size: 24px;
            box-shadow: 0 8px 32px rgba(16, 185, 129, 0.3);
        }
        
        .logo-text { font-size: 1.5rem; font-weight: 800; }
        
        .nav-links { display: flex; gap: 8px; flex-wrap: wrap; }
        
        .nav-link {
            padding: 10px 18px;
            color: var(--text-muted);
            text-decoration: none;
            font-weight: 500;
            font-size: 0.9rem;
            border-radius: 10px;
            transition: all 0.2s;
        }
        
        .nav-link:hover, .nav-link.active {
            background: rgba(99, 102, 241, 0.15);
            color: #a5b4fc;
        }
        
        .theme-toggle {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.15);
            border-radius: 12px;
            padding: 10px 16px;
            cursor: pointer;
            font-size: 1.2rem;
        }
        
        /* Category Tabs */
        .category-tabs {
            display: flex;
            gap: 8px;
            margin-bottom: 24px;
            overflow-x: auto;
            padding-bottom: 10px;
        }
        
        .category-tab {
            padding: 12px 20px;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            color: var(--text-muted);
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
            white-space: nowrap;
        }
        
        .category-tab:hover {
            background: rgba(99, 102, 241, 0.1);
            border-color: rgba(99, 102, 241, 0.3);
        }
        
        .category-tab.active {
            background: linear-gradient(135deg, #6366f1, #8b5cf6);
            border-color: transparent;
            color: white;
        }
        
        /* ===== JACKPOT SECTION ===== */
        .jackpot-section {
            background: linear-gradient(135deg, rgba(251, 191, 36, 0.05), rgba(16, 185, 129, 0.05));
            border: 1px solid rgba(251, 191, 36, 0.2);
            border-radius: 24px;
            padding: 30px;
            margin-bottom: 30px;
        }
        
        .jackpot-section-title {
            font-size: 1.8rem;
            font-weight: 800;
            background: linear-gradient(135deg, #fbbf24, #10b981);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 8px;
        }
        
        .jackpot-section-desc {
            color: var(--text-muted);
            margin-bottom: 24px;
        }
        
        .jackpot-types { display: flex; flex-direction: column; gap: 24px; }
        
        .jackpot-type-group h3 {
            font-size: 1.1rem;
            margin-bottom: 12px;
            color: var(--text-muted);
        }
        
        .jackpot-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 16px;
        }
        
        .jackpot-card {
            background: rgba(251, 191, 36, 0.08);
            border: 1px solid rgba(251, 191, 36, 0.25);
            border-radius: 16px;
            padding: 20px;
            display: flex;
            align-items: center;
            gap: 16px;
            transition: all 0.3s;
        }
        
        .jackpot-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 32px rgba(251, 191, 36, 0.15);
        }
        
        .jackpot-card.over15 {
            background: rgba(16, 185, 129, 0.08);
            border-color: rgba(16, 185, 129, 0.25);
        }
        
        .jackpot-card.over15:hover {
            box-shadow: 0 8px 32px rgba(16, 185, 129, 0.15);
        }
        
        .jackpot-icon { font-size: 2.5rem; }
        
        .jackpot-info { flex: 1; }
        
        .jackpot-name {
            display: block;
            font-size: 1.1rem;
            font-weight: 700;
            color: #fbbf24;
            margin-bottom: 4px;
        }
        
        .jackpot-card.over15 .jackpot-name { color: #10b981; }
        
        .jackpot-desc {
            font-size: 0.85rem;
            color: var(--text-muted);
        }
        
        .jackpot-timeframes {
            display: flex;
            gap: 6px;
        }
        
        .jackpot-btn {
            padding: 8px 14px;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 8px;
            color: var(--text);
            font-size: 0.8rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .jackpot-btn:hover {
            background: rgba(251, 191, 36, 0.3);
            border-color: rgba(251, 191, 36, 0.5);
        }
        
        .jackpot-results {
            margin-top: 24px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 16px;
            padding: 20px;
            max-height: 600px;
            overflow-y: auto;
        }
        
        .jackpot-results-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 16px;
        }
        
        .jackpot-results-header h3 {
            font-size: 1.2rem;
            color: #fbbf24;
        }
        
        .close-jackpot {
            width: 32px;
            height: 32px;
            background: rgba(255, 255, 255, 0.1);
            border: none;
            border-radius: 8px;
            color: var(--text);
            font-size: 1.5rem;
            cursor: pointer;
        }
        
        .jackpot-picks-list {
            display: grid;
            gap: 8px;
        }
        
        .jackpot-pick-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: rgba(255, 255, 255, 0.05);
            padding: 12px 16px;
            border-radius: 10px;
        }
        
        .jackpot-pick-match { font-weight: 600; }
        .jackpot-pick-bet { color: #10b981; font-weight: 600; }
        .jackpot-pick-odds { color: #fbbf24; }
        
        /* Accumulators Grid */
        .accas-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(380px, 1fr));
            gap: 24px;
        }
        
        @media (max-width: 768px) {
            .accas-grid { grid-template-columns: 1fr; }
        }
        
        /* Accumulator Card */
        .acca-card {
            background: rgba(20, 20, 42, 0.6);
            backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.06);
            border-radius: 20px;
            overflow: hidden;
            transition: all 0.3s;
        }
        
        .acca-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 20px 60px rgba(99, 102, 241, 0.2);
        }
        
        [data-theme="light"] .acca-card {
            background: rgba(255, 255, 255, 0.9);
            border-color: rgba(0, 0, 0, 0.08);
        }
        
        .acca-header {
            padding: 20px;
            background: linear-gradient(135deg, rgba(99, 102, 241, 0.15), rgba(139, 92, 246, 0.1));
            border-bottom: 1px solid rgba(255, 255, 255, 0.06);
        }
        
        .acca-title-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 8px;
        }
        
        .acca-title {
            font-size: 1.2rem;
            font-weight: 700;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .acca-badge {
            padding: 4px 10px;
            border-radius: 20px;
            font-size: 0.7rem;
            font-weight: 700;
            text-transform: uppercase;
        }
        
        .badge-sure { background: rgba(16, 185, 129, 0.2); color: #10b981; }
        .badge-goals { background: rgba(251, 191, 36, 0.2); color: #fbbf24; }
        .badge-result { background: rgba(99, 102, 241, 0.2); color: #a5b4fc; }
        .badge-htft { background: rgba(244, 63, 94, 0.2); color: #f43f5e; }
        
        .acca-desc {
            font-size: 0.85rem;
            color: var(--text-muted);
        }
        
        .acca-picks {
            padding: 16px 20px;
            max-height: 300px;
            overflow-y: auto;
        }
        
        .pick-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.04);
        }
        
        .pick-item:last-child { border-bottom: none; }
        
        .pick-match {
            display: flex;
            flex-direction: column;
            gap: 2px;
        }
        
        .pick-teams {
            font-weight: 600;
            font-size: 0.9rem;
        }
        
        .pick-bet {
            font-size: 0.75rem;
            color: #a5b4fc;
            display: flex;
            align-items: center;
            gap: 6px;
        }
        
        .cascade-badge {
            background: rgba(16, 185, 129, 0.2);
            color: #10b981;
            padding: 2px 6px;
            border-radius: 4px;
            font-size: 0.65rem;
            font-weight: 700;
        }
        
        .pick-odds {
            display: flex;
            flex-direction: column;
            align-items: flex-end;
            gap: 2px;
        }
        
        .odds-value {
            font-weight: 700;
            color: var(--emerald);
        }
        
        .prob-value {
            font-size: 0.75rem;
            color: var(--text-muted);
        }
        
        /* Acca Footer */
        .acca-footer {
            padding: 16px 20px;
            background: rgba(255, 255, 255, 0.02);
            border-top: 1px solid rgba(255, 255, 255, 0.06);
        }
        
        .acca-stats {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 12px;
            margin-bottom: 16px;
        }
        
        .stat-item {
            text-align: center;
        }
        
        .stat-value {
            font-size: 1.1rem;
            font-weight: 700;
        }
        
        .stat-value.odds { color: var(--gold); }
        .stat-value.prob { color: var(--emerald); }
        .stat-value.return { color: var(--accent); }
        
        .stat-label {
            font-size: 0.7rem;
            color: var(--text-muted);
            text-transform: uppercase;
        }
        
        .copy-btn {
            width: 100%;
            padding: 14px;
            background: linear-gradient(135deg, #6366f1, #8b5cf6);
            border: none;
            border-radius: 12px;
            color: white;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .copy-btn:hover {
            transform: scale(1.02);
            box-shadow: 0 8px 24px rgba(99, 102, 241, 0.4);
        }
        
        /* Loading */
        .loading {
            text-align: center;
            padding: 60px;
            color: var(--text-muted);
        }
        
        .loading-spinner {
            width: 40px;
            height: 40px;
            border: 3px solid rgba(99, 102, 241, 0.2);
            border-top-color: #6366f1;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto 16px;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        /* Empty State */
        .empty-state {
            text-align: center;
            padding: 80px 20px;
            color: var(--text-muted);
        }
        
        .empty-icon { font-size: 4rem; margin-bottom: 16px; }
        
        /* Risk indicators */
        .risk-indicator {
            display: inline-flex;
            align-items: center;
            gap: 4px;
            padding: 4px 8px;
            border-radius: 6px;
            font-size: 0.7rem;
            font-weight: 600;
        }
        
        .risk-low { background: rgba(16, 185, 129, 0.15); color: #10b981; }
        .risk-medium { background: rgba(251, 191, 36, 0.15); color: #fbbf24; }
        .risk-high { background: rgba(244, 63, 94, 0.15); color: #f43f5e; }
        
        /* Animations */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .animate-in {
            animation: fadeIn 0.4s ease forwards;
        }
    </style>
</head>
<body>
    <div class="app">
        <!-- Header -->
        <header class="header">
            <div class="logo">
                <div class="logo-icon">üéØ</div>
                <span class="logo-text">Smart Accumulators</span>
            </div>
            
            <nav class="nav-links">
                <a href="index.html" class="nav-link">üè† Home</a>
                <a href="accumulators.html" class="nav-link active">üé∞ Smart ACCAs</a>
                <a href="index.html" class="nav-link">üì∫ Live</a>
                <a href="money-zone.html" class="nav-link">üëë VIP</a>
                <a href="blog.html" class="nav-link">üì∞ Blog</a>
                <a href="analytics.html" class="nav-link">üìä Tracker</a>
            </nav>
            
            <button class="theme-toggle" onclick="toggleTheme()">üåì</button>
        </header>
        
        <!-- Info Banner -->
        <div style="background: linear-gradient(135deg, rgba(16, 185, 129, 0.15), rgba(99, 102, 241, 0.1)); border: 1px solid rgba(16, 185, 129, 0.3); border-radius: 16px; padding: 20px; margin-bottom: 24px;">
            <div style="display: flex; justify-content: space-between; align-items: flex-start; flex-wrap: wrap; gap: 20px;">
                <div style="flex: 1; min-width: 280px;">
                    <h3 style="margin-bottom: 8px; display: flex; align-items: center; gap: 10px;">
                        üß† Cascade Logic Intelligence
                    </h3>
                    <p style="color: var(--text-muted); font-size: 0.9rem;">
                        Our smart system uses <strong>cascade logic</strong>: if we predict a match will have xG ‚â• 3.5, then Over 0.5, Over 1.5, and Over 2.5 are all <span style="color: var(--emerald);">automatically considered "sure bets"</span>. 
                        We focus on <strong>easy-to-predict matches</strong> to maximize accuracy.
                    </p>
                </div>
                <div id="daily-stats" style="background: rgba(0,0,0,0.2); border-radius: 12px; padding: 16px 20px; display: flex; gap: 20px; flex-wrap: wrap;">
                    <div style="text-align: center;">
                        <div style="font-size: 1.4rem; font-weight: 700; color: var(--emerald);" id="stat-picks">--</div>
                        <div style="font-size: 0.75rem; color: var(--text-muted);">Picks Today</div>
                    </div>
                    <div style="text-align: center;">
                        <div style="font-size: 1.4rem; font-weight: 700; color: var(--gold);" id="stat-matches">--</div>
                        <div style="font-size: 0.75rem; color: var(--text-muted);">Matches</div>
                    </div>
                    <div style="text-align: center;">
                        <div style="font-size: 1.4rem; font-weight: 700; color: var(--accent);" id="stat-conf">--%</div>
                        <div style="font-size: 0.75rem; color: var(--text-muted);">Avg Conf</div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Date Filter Tabs -->
        <div class="date-tabs" id="date-tabs" style="display: flex; gap: 12px; margin-bottom: 20px;">
            <button class="date-tab active" data-days="1" style="
                flex: 1;
                padding: 16px 24px;
                background: linear-gradient(135deg, #6366f1, #8b5cf6);
                border: none;
                border-radius: 14px;
                color: white;
                font-weight: 700;
                font-size: 1rem;
                cursor: pointer;
                transition: all 0.3s;
                box-shadow: 0 4px 15px rgba(99, 102, 241, 0.3);
            ">
                üìÖ Today
            </button>
            <button class="date-tab" data-days="3" style="
                flex: 1;
                padding: 16px 24px;
                background: rgba(255, 255, 255, 0.05);
                border: 1px solid rgba(255, 255, 255, 0.1);
                border-radius: 14px;
                color: var(--text-muted);
                font-weight: 600;
                font-size: 1rem;
                cursor: pointer;
                transition: all 0.3s;
            ">
                üìÜ Next 3 Days
            </button>
            <button class="date-tab" data-days="7" style="
                flex: 1;
                padding: 16px 24px;
                background: rgba(255, 255, 255, 0.05);
                border: 1px solid rgba(255, 255, 255, 0.1);
                border-radius: 14px;
                color: var(--text-muted);
                font-weight: 600;
                font-size: 1rem;
                cursor: pointer;
                transition: all 0.3s;
            ">
                üóìÔ∏è Next 7 Days
            </button>
        </div>
        
        <!-- Category Tabs -->
        <div class="category-tabs" id="category-tabs">
            <button class="category-tab active" data-category="all">üìã All</button>
            <button class="category-tab" data-category="sure_wins">üî• Sure Wins (91%+)</button>
            <button class="category-tab" data-category="over_0_5">‚öΩ Over 0.5</button>
            <button class="category-tab" data-category="over_1_5">üéØ Over 1.5</button>
            <button class="category-tab" data-category="over_2_5">üî• Over 2.5</button>
            <button class="category-tab" data-category="btts">‚öîÔ∏è BTTS</button>
            <button class="category-tab" data-category="result">üèÜ 1X2</button>
            <button class="category-tab" data-category="double_chance">üõ°Ô∏è DC</button>
            <button class="category-tab" data-category="htft">‚è±Ô∏è HT/FT</button>
            <!-- COMBO TABS (Over25Tips inspired) -->
            <button class="category-tab" data-category="win_over_2_5">üé∞ Win + O2.5</button>
            <button class="category-tab" data-category="btts_win">üíé BTTS + Win</button>
            <button class="category-tab" data-category="btts_over_2_5">üåü BTTS + O2.5</button>
            <button class="category-tab" data-category="win_to_nil">üß§ Win to Nil</button>
        </div>
        
        <!-- Accumulators Grid (MOVED ABOVE JACKPOT) -->
        <div class="accas-grid" id="accas-grid">
            <div class="loading">
                <div class="loading-spinner"></div>
                <div>Loading smart accumulators...</div>
            </div>
        </div>
        
        <!-- ===== DEDICATED JACKPOT SECTION (MOVED BELOW GRID) ===== -->
        <div class="jackpot-section">
            <h2 class="jackpot-section-title">üé∞ Jackpot Bundles</h2>
            <p class="jackpot-section-desc">High-volume prediction bundles with the most winnable matches</p>
            
            <!-- Jackpot Types -->
            <div class="jackpot-types">
                <!-- Regular Jackpots (Any Bet Type) -->
                <div class="jackpot-type-group">
                    <h3>üé≤ Mixed Jackpots</h3>
                    <div class="jackpot-cards">
                        <div class="jackpot-card" data-jackpot="jackpot">
                            <div class="jackpot-icon">üé∞</div>
                            <div class="jackpot-info">
                                <span class="jackpot-name">Jackpot 30</span>
                                <span class="jackpot-desc">Top 30 picks (any market)</span>
                            </div>
                            <div class="jackpot-timeframes">
                                <button class="jackpot-btn" onclick="loadJackpot('jackpot', 1)">Today</button>
                                <button class="jackpot-btn" onclick="loadJackpot('jackpot', 3)">3 Days</button>
                                <button class="jackpot-btn" onclick="loadJackpot('jackpot', 7)">7 Days</button>
                            </div>
                        </div>
                        <div class="jackpot-card" data-jackpot="super_jackpot">
                            <div class="jackpot-icon">üí∞</div>
                            <div class="jackpot-info">
                                <span class="jackpot-name">Super Jackpot 40</span>
                                <span class="jackpot-desc">Top 40 picks (any market)</span>
                            </div>
                            <div class="jackpot-timeframes">
                                <button class="jackpot-btn" onclick="loadJackpot('super_jackpot', 1)">Today</button>
                                <button class="jackpot-btn" onclick="loadJackpot('super_jackpot', 3)">3 Days</button>
                                <button class="jackpot-btn" onclick="loadJackpot('super_jackpot', 7)">7 Days</button>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Over 1.5 Jackpots -->
                <div class="jackpot-type-group">
                    <h3>‚öΩ Over 1.5 Goals Jackpots</h3>
                    <div class="jackpot-cards">
                        <div class="jackpot-card over15" data-jackpot="jackpot_over15">
                            <div class="jackpot-icon">‚öΩ</div>
                            <div class="jackpot-info">
                                <span class="jackpot-name">Over 1.5 Jackpot 30</span>
                                <span class="jackpot-desc">30 best Over 1.5 goals picks</span>
                            </div>
                            <div class="jackpot-timeframes">
                                <button class="jackpot-btn" onclick="loadJackpot('jackpot_over15', 1)">Today</button>
                                <button class="jackpot-btn" onclick="loadJackpot('jackpot_over15', 3)">3 Days</button>
                                <button class="jackpot-btn" onclick="loadJackpot('jackpot_over15', 7)">7 Days</button>
                            </div>
                        </div>
                        <div class="jackpot-card over15" data-jackpot="super_jackpot_over15">
                            <div class="jackpot-icon">üî•</div>
                            <div class="jackpot-info">
                                <span class="jackpot-name">Over 1.5 Super Jackpot 40</span>
                                <span class="jackpot-desc">40 best Over 1.5 goals picks</span>
                            </div>
                            <div class="jackpot-timeframes">
                                <button class="jackpot-btn" onclick="loadJackpot('super_jackpot_over15', 1)">Today</button>
                                <button class="jackpot-btn" onclick="loadJackpot('super_jackpot_over15', 3)">3 Days</button>
                                <button class="jackpot-btn" onclick="loadJackpot('super_jackpot_over15', 7)">7 Days</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Jackpot Results Display -->
            <div id="jackpot-results" class="jackpot-results" style="display:none;">
                <div class="jackpot-results-header">
                    <h3 id="jackpot-results-title"></h3>
                    <button class="close-jackpot" onclick="closeJackpotResults()">&times;</button>
                </div>
                <div id="jackpot-results-content"></div>
            </div>
        </div>
    </div>
    
    <script>
        // API Configuration
        const API_BASE = 'https://footypredict-api.tirene857.workers.dev';
        
        // Theme toggle
        function toggleTheme() {
            const html = document.documentElement;
            const next = html.getAttribute('data-theme') === 'dark' ? 'light' : 'dark';
            html.setAttribute('data-theme', next);
            localStorage.setItem('theme', next);
        }
        
        // Load saved theme
        (function() {
            const saved = localStorage.getItem('theme');
            if (saved) document.documentElement.setAttribute('data-theme', saved);
        })();
        
        // ===== JACKPOT FUNCTIONS =====
        async function loadJackpot(jackpotType, days) {
            const resultsDiv = document.getElementById('jackpot-results');
            const titleEl = document.getElementById('jackpot-results-title');
            const contentEl = document.getElementById('jackpot-results-content');
            
            const typeNames = {
                'jackpot': 'Jackpot 30',
                'super_jackpot': 'Super Jackpot 40',
                'jackpot_over15': 'Over 1.5 Jackpot 30',
                'super_jackpot_over15': 'Over 1.5 Super Jackpot 40'
            };
            
            const dayLabel = days === 1 ? 'Today' : `${days} Days`;
            titleEl.textContent = `${typeNames[jackpotType]} - ${dayLabel}`;
            
            resultsDiv.style.display = 'block';
            contentEl.innerHTML = '<div class="loading"><div class="loading-spinner"></div>Loading jackpot...</div>';
            
            try {
                const response = await fetch(`${API_BASE}/fixtures?days=${days}`);
                const data = await response.json();
                
                if (data.success && data.accumulator) {
                    const acca = data.accumulator;
                    const picks = acca.picks || [];
                    
                    contentEl.innerHTML = `
                        <div class="jackpot-summary" style="margin-bottom:16px; padding:16px; background:rgba(251,191,36,0.1); border-radius:12px;">
                            <div style="display:flex; justify-content:space-between; align-items:center; flex-wrap:wrap; gap:16px;">
                                <div>
                                    <span style="font-size:0.9rem; color:var(--text-muted);">Total Picks:</span>
                                    <span style="font-size:1.5rem; font-weight:700; color:#fbbf24; margin-left:8px;">${picks.length}</span>
                                </div>
                                <div>
                                    <span style="font-size:0.9rem; color:var(--text-muted);">Combined Odds:</span>
                                    <span style="font-size:1.5rem; font-weight:700; color:#10b981; margin-left:8px;">${acca.combined_odds?.toFixed(2) || 'N/A'}</span>
                                </div>
                            </div>
                        </div>
                        <div class="jackpot-picks-list">
                            ${picks.map((p, i) => `
                                <div class="jackpot-pick-card" style="
                                    background: rgba(255,255,255,0.03);
                                    border: 1px solid rgba(255,255,255,0.08);
                                    border-radius: 12px;
                                    padding: 12px 16px;
                                    margin-bottom: 8px;
                                ">
                                    <div style="display:flex; align-items:center; gap:12px; flex-wrap:wrap;">
                                        <!-- Pick Number -->
                                        <span style="
                                            background: linear-gradient(135deg, #fbbf24, #f59e0b);
                                            color: #000;
                                            width: 28px;
                                            height: 28px;
                                            border-radius: 8px;
                                            display: flex;
                                            align-items: center;
                                            justify-content: center;
                                            font-weight: 700;
                                            font-size: 0.85rem;
                                        ">#${i+1}</span>
                                        
                                        <!-- Teams with Logos -->
                                        <div style="flex:1; min-width:200px;">
                                            <div style="display:flex; align-items:center; gap:8px;">
                                                <img src="https://img.sofascore.com/api/v1/team/${p.match_id?.replace(/\\D/g,'').slice(0,5) || '123'}/image" 
                                                     onerror="this.src='data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 40 40%22><circle cx=%2220%22 cy=%2220%22 r=%2218%22 fill=%22%23333%22/><text x=%2220%22 y=%2225%22 text-anchor=%22middle%22 fill=%22white%22 font-size=%2214%22>‚öΩ</text></svg>'"
                                                     style="width:24px; height:24px; border-radius:50%; object-fit:cover;">
                                                <span style="font-weight:600;">${p.home_team}</span>
                                                <span style="color:var(--text-muted); font-size:0.85rem;">vs</span>
                                                <span style="font-weight:600;">${p.away_team}</span>
                                                <img src="https://img.sofascore.com/api/v1/team/${p.match_id?.replace(/\\D/g,'').slice(5,10) || '456'}/image"
                                                     onerror="this.src='data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 40 40%22><circle cx=%2220%22 cy=%2220%22 r=%2218%22 fill=%22%23333%22/><text x=%2220%22 y=%2225%22 text-anchor=%22middle%22 fill=%22white%22 font-size=%2214%22>‚öΩ</text></svg>'"
                                                     style="width:24px; height:24px; border-radius:50%; object-fit:cover;">
                                            </div>
                                            <div style="display:flex; gap:12px; margin-top:4px; font-size:0.8rem; color:var(--text-muted); flex-wrap:wrap;">
                                                <span>üìÖ ${p.date || 'TBD'}</span>
                                                <span>‚è∞ ${p.kickoff || '15:00'}</span>
                                                <span>üèÜ ${p.league || 'League'}</span>
                                            </div>
                                        </div>
                                        
                                        <!-- Bet Type -->
                                        <div style="
                                            background: rgba(16, 185, 129, 0.15);
                                            border: 1px solid rgba(16, 185, 129, 0.3);
                                            border-radius: 8px;
                                            padding: 6px 12px;
                                            color: #10b981;
                                            font-weight: 600;
                                            font-size: 0.85rem;
                                        ">${p.bet_label}</div>
                                        
                                        <!-- Odds -->
                                        <div style="
                                            background: rgba(251, 191, 36, 0.15);
                                            border-radius: 8px;
                                            padding: 6px 12px;
                                            color: #fbbf24;
                                            font-weight: 700;
                                            font-size: 0.9rem;
                                        ">${p.odds?.toFixed(2) || '1.00'}</div>
                                    </div>
                                </div>
                            `).join('')}
                        </div>
                    `;
                } else {
                    contentEl.innerHTML = '<div style="text-align:center; padding:20px; color:#f43f5e;">No picks available for this timeframe</div>';
                }
            } catch (error) {
                contentEl.innerHTML = `<div style="text-align:center; padding:20px; color:#f43f5e;">Error loading: ${error.message}</div>`;
            }
        }
        
        function closeJackpotResults() {
            document.getElementById('jackpot-results').style.display = 'none';
        }
        
        // State
        let allAccumulators = {};
        let currentCategory = 'all';
        let currentDays = 1;
        
        // Initialize
        document.addEventListener('DOMContentLoaded', () => {
            loadSmartAccumulators();
            loadDailyStats();
            
            // Date tab clicks
            document.querySelectorAll('.date-tab').forEach(tab => {
                tab.addEventListener('click', () => {
                    // Update styling
                    document.querySelectorAll('.date-tab').forEach(t => {
                        t.style.background = 'rgba(255, 255, 255, 0.05)';
                        t.style.border = '1px solid rgba(255, 255, 255, 0.1)';
                        t.style.color = 'var(--text-muted)';
                        t.style.boxShadow = 'none';
                        t.classList.remove('active');
                    });
                    tab.style.background = 'linear-gradient(135deg, #6366f1, #8b5cf6)';
                    tab.style.border = 'none';
                    tab.style.color = 'white';
                    tab.style.boxShadow = '0 4px 15px rgba(99, 102, 241, 0.3)';
                    tab.classList.add('active');
                    
                    currentDays = parseInt(tab.dataset.days);
                    loadSmartAccumulators();
                });
            });
            
            // Category tab clicks
            document.querySelectorAll('.category-tab').forEach(tab => {
                tab.addEventListener('click', () => {
                    document.querySelectorAll('.category-tab').forEach(t => t.classList.remove('active'));
                    tab.classList.add('active');
                    currentCategory = tab.dataset.category;
                    renderAccumulators();
                });
            });
        });
        
        async function loadDailyStats() {
            try {
                const response = await fetch(`${API_BASE}/fixtures?days=1&predictions=true`);
                const data = await response.json();
                
                if (data.success) {
                    document.getElementById('stat-picks').textContent = data.total_picks || 0;
                    document.getElementById('stat-matches').textContent = data.total_matches_analyzed || 0;
                    
                    if (data.summary && data.summary.avg_confidence) {
                        const avgConf = (data.summary.avg_confidence * 100).toFixed(0);
                        document.getElementById('stat-conf').textContent = avgConf + '%';
                    }
                }
            } catch (err) {
                console.log('Daily stats not available:', err.message);
            }
        }
        
        async function loadSmartAccumulators() {
            const grid = document.getElementById('accas-grid');
            
            // Show loading
            grid.innerHTML = `
                <div class="loading">
                    <div class="loading-spinner"></div>
                    <div>Loading predictions for ${currentDays === 1 ? 'today' : 'next ' + currentDays + ' days'}...</div>
                </div>
            `;
            
            try {
                const response = await fetch(`${API_BASE}/fixtures?days=${currentDays}`);
                const data = await response.json();
                
                if (data.fixtures && data.fixtures.length > 0) {
                    // Transform fixtures into accumulator categories
                    allAccumulators = generateAccumulators(data.fixtures);
                    renderAccumulators();
                    
                    // Update stats
                    document.getElementById('stat-picks').textContent = data.fixtures.length;
                    document.getElementById('stat-matches').textContent = data.fixtures.length;
                    const avgConf = data.fixtures.reduce((sum, f) => sum + (f.confidence || 0.5), 0) / data.fixtures.length;
                    document.getElementById('stat-conf').textContent = (avgConf * 100).toFixed(0) + '%';
                } else {
                    grid.innerHTML = `
                        <div class="empty-state" style="grid-column: 1/-1;">
                            <div class="empty-icon">üì≠</div>
                            <div>No smart accumulators available</div>
                            <p style="color: var(--text-muted); margin-top: 8px;">Check back when more fixtures are available</p>
                        </div>
                    `;
                }
            } catch (err) {
                console.error('Error loading accumulators:', err);
                grid.innerHTML = `
                    <div class="empty-state" style="grid-column: 1/-1;">
                        <div class="empty-icon">‚ö†Ô∏è</div>
                        <div>Error loading accumulators</div>
                        <p style="color: var(--text-muted); margin-top: 8px;">${err.message}</p>
                    </div>
                `;
            }
        }
        
        // Transform fixtures into accumulator categories
        function generateAccumulators(fixtures) {
            const accas = {
                sure_wins: { name: 'Sure Wins', picks: [], description: 'High confidence predictions (91%+)' },
                over_0_5: { name: 'Over 0.5 Goals', picks: [], description: 'Matches likely to have at least 1 goal' },
                over_1_5: { name: 'Over 1.5 Goals', picks: [], description: 'Matches likely to have 2+ goals' },
                over_2_5: { name: 'Over 2.5 Goals', picks: [], description: 'High-scoring matches (3+ goals)' },
                btts: { name: 'Both Teams to Score', picks: [], description: 'Both teams expected to score' },
                result: { name: 'Match Result', picks: [], description: 'Win/Draw predictions' },
                double_chance: { name: 'Double Chance', picks: [], description: 'Safe 1X, 12, X2 bets' }
            };
            
            fixtures.forEach(f => {
                const pred = f.prediction || {};
                const conf = f.confidence || 0.5;
                
                // Create pick object
                const pick = {
                    home_team: f.home_team,
                    away_team: f.away_team,
                    league: f.league || f.league_name,
                    date: f.date,
                    kickoff: f.time,
                    confidence: conf,
                    home_logo: f.home_logo,
                    away_logo: f.away_logo
                };
                
                // Sure wins (91%+ confidence)
                if (conf >= 0.91) {
                    accas.sure_wins.picks.push({ ...pick, bet_label: pred.result?.recommendation || 'Sure Bet', odds: 1.5 });
                }
                
                // Over/Under markets
                if (pred.over_25?.yes > 0.55) {
                    accas.over_2_5.picks.push({ ...pick, bet_label: 'Over 2.5', odds: pred.over_25.yes > 0.7 ? 1.4 : 1.8 });
                    accas.over_1_5.picks.push({ ...pick, bet_label: 'Over 1.5', odds: 1.25 });
                    accas.over_0_5.picks.push({ ...pick, bet_label: 'Over 0.5', odds: 1.05 });
                } else if (pred.over_25?.yes > 0.45) {
                    accas.over_1_5.picks.push({ ...pick, bet_label: 'Over 1.5', odds: 1.35 });
                    accas.over_0_5.picks.push({ ...pick, bet_label: 'Over 0.5', odds: 1.05 });
                }
                
                // BTTS
                if (pred.btts?.yes > 0.5) {
                    accas.btts.picks.push({ ...pick, bet_label: 'Both Teams to Score', odds: pred.btts.yes > 0.6 ? 1.6 : 1.9 });
                }
                
                // Match Result
                if (pred.result) {
                    const maxProb = Math.max(pred.result.home || 0, pred.result.draw || 0, pred.result.away || 0);
                    if (maxProb > 0.5) {
                        accas.result.picks.push({ ...pick, bet_label: pred.result.recommendation, odds: 1 / maxProb });
                    }
                    // Double Chance
                    if (pred.result.home > 0.35 || pred.result.away > 0.35) {
                        accas.double_chance.picks.push({ 
                            ...pick, 
                            bet_label: pred.result.home > pred.result.away ? '1X' : 'X2', 
                            odds: 1.3 
                        });
                    }
                }
            });
            
            // Sort each category by confidence and add summary stats
            Object.entries(accas).forEach(([key, cat]) => {
                cat.picks.sort((a, b) => b.confidence - a.confidence);
                cat.picks = cat.picks.slice(0, 15); // Limit to top 15 picks per category
                
                // Add probability to each pick
                cat.picks = cat.picks.map(p => ({
                    ...p,
                    probability: p.confidence || 0.5
                }));
                
                // Calculate combined stats
                if (cat.picks.length > 0) {
                    cat.combined_odds = cat.picks.reduce((acc, p) => acc * (p.odds || 1), 1);
                    cat.win_chance_pct = Math.max(5, Math.round(100 / cat.combined_odds));
                    cat.suggested_stake = 10;
                    cat.potential_return = Math.round(cat.combined_odds * 10);
                } else {
                    cat.combined_odds = 1;
                    cat.win_chance_pct = 100;
                    cat.suggested_stake = 10;
                    cat.potential_return = 10;
                }
            });
            
            return accas;
        }
        
        function renderAccumulators() {
            const grid = document.getElementById('accas-grid');
            
            // Jackpot categories to exclude from main grid (they have dedicated section below)
            const jackpotCategories = ['jackpot', 'super_jackpot', 'jackpot_over15', 'super_jackpot_over15'];
            
            // Filter accumulators - exclude jackpots from main grid
            let accasToShow = currentCategory === 'all' 
                ? Object.entries(allAccumulators).filter(([key]) => !jackpotCategories.includes(key))
                : Object.entries(allAccumulators).filter(([key]) => key === currentCategory && !jackpotCategories.includes(key));
            
            if (accasToShow.length === 0) {
                grid.innerHTML = `
                    <div class="empty-state" style="grid-column: 1/-1;">
                        <div class="empty-icon">üì≠</div>
                        <div>No ${currentCategory.replace('_', ' ')} accumulators found</div>
                        <p style="color: var(--text-muted); margin-top: 8px;">Check the Jackpot Bundles section below or try a different date range</p>
                    </div>
                `;
                return;
            }
            
            grid.innerHTML = accasToShow.map(([key, acca], idx) => {
                const badgeClass = getBadgeClass(key);
                const riskClass = `risk-${acca.risk_level || 'medium'}`;
                
                return `
                    <div class="acca-card animate-in" style="animation-delay: ${idx * 0.1}s;">
                        <div class="acca-header">
                            <div class="acca-title-row">
                                <h3 class="acca-title">
                                    ${acca.emoji || 'üéØ'} ${acca.name}
                                </h3>
                                <span class="acca-badge ${badgeClass}">${acca.num_picks} picks</span>
                            </div>
                            <p class="acca-desc">${acca.description}</p>
                        </div>
                        
                        <div class="acca-picks">
                            ${acca.picks.map(pick => `
                                <div class="pick-item">
                                    <div class="pick-match">
                                        <span class="pick-teams">${pick.home_team} vs ${pick.away_team}</span>
                                        <div class="pick-meta" style="display: flex; gap: 12px; font-size: 0.75rem; color: var(--text-muted); margin-top: 4px;">
                                            <span>üìÖ ${pick.date || 'TBD'}</span>
                                            <span>‚è∞ ${pick.time || 'TBD'}</span>
                                            <span>üèüÔ∏è ${pick.venue || pick.league || 'TBD'}</span>
                                        </div>
                                        <span class="pick-bet">
                                            ${pick.bet_label}
                                            ${pick.is_cascade ? '<span class="cascade-badge">CASCADE</span>' : ''}
                                        </span>
                                    </div>
                                    <div class="pick-odds">
                                        <span class="odds-value">${pick.odds.toFixed(2)}</span>
                                        <span class="prob-value">${(pick.probability * 100).toFixed(0)}%</span>
                                    </div>
                                </div>
                            `).join('')}
                        </div>
                        
                        <div class="acca-footer">
                            <div class="acca-stats">
                                <div class="stat-item">
                                    <div class="stat-value odds">${acca.combined_odds.toFixed(2)}</div>
                                    <div class="stat-label">Combined Odds</div>
                                </div>
                                <div class="stat-item">
                                    <div class="stat-value prob">${acca.win_chance_pct}%</div>
                                    <div class="stat-label">Win Chance</div>
                                </div>
                                <div class="stat-item">
                                    <div class="stat-value return">‚Ç¨${acca.potential_return}</div>
                                    <div class="stat-label">‚Ç¨${acca.suggested_stake} Stake</div>
                                </div>
                            </div>
                            <div style="display: flex; gap: 8px; margin-bottom: 12px; justify-content: center;">
                                <span class="risk-indicator ${riskClass}">
                                    ${acca.risk_level === 'low' ? 'üü¢' : acca.risk_level === 'medium' ? 'üü°' : 'üî¥'}
                                    ${(acca.risk_level || 'medium').toUpperCase()} RISK
                                </span>
                                <span class="risk-indicator" style="background: rgba(99, 102, 241, 0.15); color: #a5b4fc;">
                                    ‚≠ê ${(acca.confidence_rating || 'medium').toUpperCase()}
                                </span>
                            </div>
                            <button class="copy-btn" onclick="copyAcca('${key}')">
                                üìã Copy Accumulator
                            </button>
                        </div>
                    </div>
                `;
            }).join('');
        }
        
        function getBadgeClass(key) {
            if (key === 'sure_wins' || key === 'double_chance' || key === 'win_to_nil') return 'badge-sure';
            if (key.startsWith('over_') || key === 'btts' || key.includes('btts_')) return 'badge-goals';
            if (key === 'result' || key === 'win_over_2_5') return 'badge-result';
            if (key === 'htft') return 'badge-htft';
            if (key === 'jackpot' || key === 'super_jackpot') return 'badge-goals';
            return 'badge-result';
        }
        
        function copyAcca(key) {
            const acca = allAccumulators[key];
            if (!acca) return;
            
            let text = `üéØ ${acca.name}\n`;
            text += `‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ\n`;
            acca.picks.forEach((p, i) => {
                text += `${i+1}. ${p.home_team} vs ${p.away_team}\n`;
                text += `   üìå ${p.bet_label} @ ${p.odds.toFixed(2)}\n`;
            });
            text += `‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ\n`;
            text += `üí∞ Combined Odds: ${acca.combined_odds.toFixed(2)}\n`;
            text += `üìä Win Chance: ${acca.win_chance_pct}%\n`;
            text += `üíµ Suggested: ‚Ç¨${acca.suggested_stake} ‚Üí ‚Ç¨${acca.potential_return}\n`;
            
            navigator.clipboard.writeText(text).then(() => {
                alert('Accumulator copied to clipboard! üìã');
            }).catch(() => {
                // Fallback
                const textarea = document.createElement('textarea');
                textarea.value = text;
                document.body.appendChild(textarea);
                textarea.select();
                document.execCommand('copy');
                document.body.removeChild(textarea);
                alert('Accumulator copied! üìã');
            });
        }
    </script>
</body>
</html>
